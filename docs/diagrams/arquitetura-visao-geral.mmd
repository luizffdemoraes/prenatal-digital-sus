flowchart TB
    subgraph Infraestrutura
        PG[(PostgreSQL<br/>prenatal_digital_sus)]
        S3[("LocalStack S3<br/>prenatal-documents")]
    end

    subgraph Servi√ßos
        AUTH[prenatal-auth<br/>:8079<br/>OAuth2 / JWT]
        AGENDA[prenatal-agenda<br/>:8080]
        PRONT[prenatal-prontuario<br/>:8082]
        DOC[prenatal-documento<br/>:8081]
        ALERTAS[prenatal-alertas<br/>:8084]
    end

    subgraph Cliente
        USER[Cliente / Postman]
    end

    USER -->|POST /oauth2/token| AUTH
    USER -->|Bearer JWT| AGENDA
    USER -->|Bearer JWT| PRONT
    USER -->|Bearer JWT| DOC

    AUTH -->|valida JWT| AGENDA
    AUTH -->|valida JWT| PRONT
    AUTH -->|valida JWT| DOC
    AUTH --> PG

    AGENDA --> PG
    PRONT --> PG
    DOC --> PG
    DOC --> S3
    ALERTAS --> PG
    ALERTAS -->|SMTP| EMAIL[(E-mail)]
