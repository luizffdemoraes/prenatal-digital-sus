flowchart TB
    subgraph Infra["Infraestrutura de Dados"]
        PG[(PostgreSQL 16<br/>prenatal_digital_sus)]
        S3[("LocalStack S3<br/>Bucket: prenatal-documents")]
    end

    subgraph Auth["Schema: auth"]
        users[(auth.users)]
        roles[(auth.roles)]
        user_role[(auth.user_role)]
    end

    subgraph Agenda["Schema: agenda"]
        agenda_medico[(agenda.agenda_medico)]
        agenda_dias[(agenda.agenda_dias_atendimento)]
        consulta[(agenda.consulta)]
    end

    subgraph Pront["Schema: prontuario"]
        prontuario[(prontuario.prontuario)]
        fatores[(prontuario.prontuario_fatores_risco)]
        historico[(prontuario.prontuario_historico)]
    end

    subgraph Doc["Schema: documento"]
        doc_medico[(documento.documento_medico)]
        vacina[(documento.vacina)]
    end

    PG --> Auth
    PG --> Agenda
    PG --> Pront
    PG --> Doc
    Doc -->|caminho_armazenamento| S3
