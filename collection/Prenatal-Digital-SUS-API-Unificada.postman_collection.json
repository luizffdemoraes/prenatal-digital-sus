{
    "item":  [
                 {
                     "name":  "Prenatal Agenda",
                     "description":  "Serviço de agendamento de consultas pré-natais. **Ordem:** 1) Criar Agenda do Médico 2) Consultar Horários 3) Agendar Consulta. Requer token JWT.",
                     "item":  [
                                  {
                                      "name":  "Health Check",
                                      "item":  [
                                                   {
                                                       "name":  "Verificar Status da API",
                                                       "request":  {
                                                                       "auth":  {
                                                                                    "type":  "noauth"
                                                                                },
                                                                       "method":  "GET",
                                                                       "header":  [

                                                                                  ],
                                                                       "url":  {
                                                                                   "raw":  "{{base_url_agenda}}/actuator/health",
                                                                                   "host":  [
                                                                                                "{{base_url_agenda}}"
                                                                                            ],
                                                                                   "path":  [
                                                                                                "actuator",
                                                                                                "health"
                                                                                            ]
                                                                               },
                                                                       "description":  "Verifica o status de saúde da aplicação. Rota pública â€” não requer autenticação (sem Bearer)."
                                                                   },
                                                       "response":  [

                                                                    ]
                                                   }
                                               ]
                                  },
                                  {
                                      "name":  "Agenda Médico",
                                      "item":  [
                                                   {
                                                       "name":  "Criar Agenda do Médico",
                                                       "request":  {
                                                                       "method":  "POST",
                                                                       "header":  [
                                                                                      {
                                                                                          "key":  "Content-Type",
                                                                                          "value":  "application/json"
                                                                                      },
                                                                                      {
                                                                                          "key":  "Authorization",
                                                                                          "value":  "Bearer {{access_token}}",
                                                                                          "type":  "text"
                                                                                      }
                                                                                  ],
                                                                       "body":  {
                                                                                    "mode":  "raw",
                                                                                    "raw":  "{\n    \"crm\": \"12345\",\n    \"medicoNome\": \"Dr. Pedro Souza\",\n    \"especialidade\": \"Obstetrícia\",\n    \"unidadeId\": 1,\n    \"diasAtendimento\": [\"SEGUNDA\", \"TERCA\", \"QUARTA\", \"QUINTA\", \"SEXTA\"],\n    \"horarioInicio\": \"08:00\",\n    \"horarioFim\": \"17:00\",\n    \"duracaoConsultaMinutos\": 30\n}",
                                                                                    "options":  {
                                                                                                    "raw":  {
                                                                                                                "language":  "json"
                                                                                                            }
                                                                                                }
                                                                                },
                                                                       "url":  {
                                                                                   "raw":  "{{base_url_agenda}}/api/agendas/medico",
                                                                                   "host":  [
                                                                                                "{{base_url_agenda}}"
                                                                                            ],
                                                                                   "path":  [
                                                                                                "api",
                                                                                                "agendas",
                                                                                                "medico"
                                                                                            ]
                                                                               },
                                                                       "description":  "Cria a agenda semanal de um médico. Requer ROLE_DOCTOR ou ROLE_NURSE.\n\n- crm, medicoNome, especialidade: obrigatórios (médico identificado por CRM).\n- unidadeId, diasAtendimento, horarioInicio, horarioFim, duracaoConsultaMinutos.\n\nStub: CRM 12345 ou 123456 â†’ medico_id=1. Dias: SEGUNDA, TERCA, QUARTA, QUINTA, SEXTA, SABADO, DOMINGO."
                                                                   },
                                                       "response":  [

                                                                    ]
                                                   },
                                                   {
                                                       "name":  "Buscar Agenda por Médico (CRM)",
                                                       "request":  {
                                                                       "method":  "GET",
                                                                       "header":  [
                                                                                      {
                                                                                          "key":  "Authorization",
                                                                                          "value":  "Bearer {{access_token}}",
                                                                                          "type":  "text"
                                                                                      }
                                                                                  ],
                                                                       "url":  {
                                                                                   "raw":  "{{base_url_agenda}}/api/agendas/medico/{{crm}}",
                                                                                   "host":  [
                                                                                                "{{base_url_agenda}}"
                                                                                            ],
                                                                                   "path":  [
                                                                                                "api",
                                                                                                "agendas",
                                                                                                "medico",
                                                                                                "{{crm}}"
                                                                                            ]
                                                                               },
                                                                       "description":  "Busca a agenda de um médico pelo CRM. Requer ROLE_DOCTOR, ROLE_NURSE ou ROLE_PATIENT (gestantes consultam agendas para escolher médico). Stub: 12345 ou 123456."
                                                                   },
                                                       "response":  [

                                                                    ]
                                                   },
                                                   {
                                                       "name":  "Atualizar Agenda do Médico",
                                                       "request":  {
                                                                       "method":  "PUT",
                                                                       "header":  [
                                                                                      {
                                                                                          "key":  "Content-Type",
                                                                                          "value":  "application/json"
                                                                                      },
                                                                                      {
                                                                                          "key":  "Authorization",
                                                                                          "value":  "Bearer {{access_token}}",
                                                                                          "type":  "text"
                                                                                      }
                                                                                  ],
                                                                       "body":  {
                                                                                    "mode":  "raw",
                                                                                    "raw":  "{\n    \"unidadeId\": 1,\n    \"diasAtendimento\": [\"SEGUNDA\", \"TERCA\", \"QUARTA\", \"QUINTA\"],\n    \"horarioInicio\": \"09:00\",\n    \"horarioFim\": \"16:00\",\n    \"duracaoConsultaMinutos\": 30\n}",
                                                                                    "options":  {
                                                                                                    "raw":  {
                                                                                                                "language":  "json"
                                                                                                            }
                                                                                                }
                                                                                },
                                                                       "url":  {
                                                                                   "raw":  "{{base_url_agenda}}/api/agendas/medico/{{crm}}",
                                                                                   "host":  [
                                                                                                "{{base_url_agenda}}"
                                                                                            ],
                                                                                   "path":  [
                                                                                                "api",
                                                                                                "agendas",
                                                                                                "medico",
                                                                                                "{{crm}}"
                                                                                            ]
                                                                               },
                                                                       "description":  "Altera a agenda semanal do médico. Requer ROLE_DOCTOR ou ROLE_NURSE. CRM na URL. Body: unidadeId, diasAtendimento, horarioInicio, horarioFim, duracaoConsultaMinutos."
                                                                   },
                                                       "response":  [

                                                                    ]
                                                   },
                                                   {
                                                       "name":  "Excluir Agenda do Médico",
                                                       "request":  {
                                                                       "method":  "DELETE",
                                                                       "header":  [
                                                                                      {
                                                                                          "key":  "Authorization",
                                                                                          "value":  "Bearer {{access_token}}",
                                                                                          "type":  "text"
                                                                                      }
                                                                                  ],
                                                                       "url":  {
                                                                                   "raw":  "{{base_url_agenda}}/api/agendas/medico/{{crm}}",
                                                                                   "host":  [
                                                                                                "{{base_url_agenda}}"
                                                                                            ],
                                                                                   "path":  [
                                                                                                "api",
                                                                                                "agendas",
                                                                                                "medico",
                                                                                                "{{crm}}"
                                                                                            ]
                                                                               },
                                                                       "description":  "Exclui a agenda do médico. Requer ROLE_DOCTOR ou ROLE_NURSE. CRM na URL. Só é permitido se não houver consultas agendadas (status AGENDADA) para o médico; caso contrário retorna 400. Retorna 204 quando excluída."
                                                                   },
                                                       "response":  [

                                                                    ]
                                                   }
                                               ]
                                  },
                                  {
                                      "name":  "Consultas",
                                      "item":  [
                                                   {
                                                       "name":  "Agendar Consulta",
                                                       "event":  [
                                                                     {
                                                                         "listen":  "test",
                                                                         "script":  {
                                                                                        "exec":  [
                                                                                                     "if (pm.response.code === 201) {",
                                                                                                     "    var jsonData = pm.response.json();",
                                                                                                     "    pm.environment.set(\"consulta_id\", jsonData.id);",
                                                                                                     "    console.log(\"Consulta agendada com ID: \" + jsonData.id);",
                                                                                                     "}"
                                                                                                 ],
                                                                                        "type":  "text/javascript"
                                                                                    }
                                                                     }
                                                                 ],
                                                       "request":  {
                                                                       "method":  "POST",
                                                                       "header":  [
                                                                                      {
                                                                                          "key":  "Content-Type",
                                                                                          "value":  "application/json"
                                                                                      },
                                                                                      {
                                                                                          "key":  "Authorization",
                                                                                          "value":  "Bearer {{access_token}}",
                                                                                          "type":  "text"
                                                                                      },
                                                                                      {
                                                                                          "key":  "X-Unidade-Id",
                                                                                          "value":  "{{unidade_id}}",
                                                                                          "description":  "ID da UBS que está realizando o agendamento"
                                                                                      }
                                                                                  ],
                                                                       "body":  {
                                                                                    "mode":  "raw",
                                                                                    "raw":  "{\n    \"gestanteNome\": \"Maria Silva\",\n    \"gestanteCpf\": \"111.111.111-11\",\n    \"especialidade\": \"Obstetrícia\",\n    \"data\": \"2026-01-28\",\n    \"horario\": \"09:00\"\n}",
                                                                                    "options":  {
                                                                                                    "raw":  {
                                                                                                                "language":  "json"
                                                                                                            }
                                                                                                }
                                                                                },
                                                                       "url":  {
                                                                                   "raw":  "{{base_url_agenda}}/api/consultas/agendar",
                                                                                   "host":  [
                                                                                                "{{base_url_agenda}}"
                                                                                            ],
                                                                                   "path":  [
                                                                                                "api",
                                                                                                "consultas",
                                                                                                "agendar"
                                                                                            ]
                                                                               },
                                                                       "description":  "Agenda uma consulta (MVP). Requer ROLE_PATIENT ou ROLE_NURSE.\n\n- Header X-Unidade-Id: UBS que realiza o agendamento (obrigatório).\n- Gestante: gestanteNome e gestanteCpf (obrigatórios).\n- Médico: medicoNome OU especialidade OU crm (um deles).\n- data, horario (obrigatórios).\n\nStub: CPF 111.111.111-11; especialidade Obstetrícia/Obstetra/Prenatal ou nome Dr. João/Silva ou CRM 12345 â†’ 1."
                                                                   },
                                                       "response":  [

                                                                    ]
                                                   },
                                                   {
                                                       "name":  "Cancelar Consulta",
                                                       "request":  {
                                                                       "method":  "DELETE",
                                                                       "header":  [
                                                                                      {
                                                                                          "key":  "Authorization",
                                                                                          "value":  "Bearer {{access_token}}",
                                                                                          "type":  "text"
                                                                                      }
                                                                                  ],
                                                                       "url":  {
                                                                                   "raw":  "{{base_url_agenda}}/api/consultas/{{consulta_id}}/cancelar?motivo=GESTANTE_DESISTIU",
                                                                                   "host":  [
                                                                                                "{{base_url_agenda}}"
                                                                                            ],
                                                                                   "path":  [
                                                                                                "api",
                                                                                                "consultas",
                                                                                                "{{consulta_id}}",
                                                                                                "cancelar"
                                                                                            ],
                                                                                   "query":  [
                                                                                                 {
                                                                                                     "key":  "motivo",
                                                                                                     "value":  "GESTANTE_DESISTIU",
                                                                                                     "description":  "Motivos disponíveis: GESTANTE_DESISTIU, MEDICO_INDISPONIVEL, EMERGENCIA, OUTRO"
                                                                                                 }
                                                                                             ]
                                                                               },
                                                                       "description":  "Cancela uma consulta agendada. Requer permissÃ£o ROLE_PATIENT, ROLE_NURSE ou ROLE_DOCTOR.\n\nMotivos disponíveis:\n- GESTANTE_DESISTIU\n- MEDICO_INDISPONIVEL\n- EMERGENCIA\n- OUTRO"
                                                                   },
                                                       "response":  [

                                                                    ]
                                                   }
                                               ]
                                  },
                                  {
                                      "name":  "Gestantes",
                                      "item":  [
                                                   {
                                                       "name":  "Consultar Consultas por CPF (própria agenda)",
                                                       "request":  {
                                                                       "method":  "GET",
                                                                       "header":  [
                                                                                      {
                                                                                          "key":  "Authorization",
                                                                                          "value":  "Bearer {{access_token}}",
                                                                                          "type":  "text"
                                                                                      }
                                                                                  ],
                                                                       "url":  {
                                                                                   "raw":  "{{base_url_agenda}}/api/gestantes/consultas?cpf={{cpf}}",
                                                                                   "host":  [
                                                                                                "{{base_url_agenda}}"
                                                                                            ],
                                                                                   "path":  [
                                                                                                "api",
                                                                                                "gestantes",
                                                                                                "consultas"
                                                                                            ],
                                                                                   "query":  [
                                                                                                 {
                                                                                                     "key":  "cpf",
                                                                                                     "value":  "{{cpf}}",
                                                                                                     "description":  "CPF da gestante (própria agenda)"
                                                                                                 }
                                                                                             ]
                                                                               },
                                                                       "description":  "Consulta a própria agenda (consultas agendadas) da gestante por CPF. Gestantes, Enfermeiras e Médicos. Stub: 111.111.111-11 ou 11111111111."
                                                                   },
                                                       "response":  [

                                                                    ]
                                                   },
                                                   {
                                                       "name":  "Listar Consultas por gestanteId",
                                                       "request":  {
                                                                       "method":  "GET",
                                                                       "header":  [
                                                                                      {
                                                                                          "key":  "Authorization",
                                                                                          "value":  "Bearer {{access_token}}",
                                                                                          "type":  "text"
                                                                                      }
                                                                                  ],
                                                                       "url":  {
                                                                                   "raw":  "{{base_url_agenda}}/api/gestantes/{{gestante_id}}/consultas",
                                                                                   "host":  [
                                                                                                "{{base_url_agenda}}"
                                                                                            ],
                                                                                   "path":  [
                                                                                                "api",
                                                                                                "gestantes",
                                                                                                "{{gestante_id}}",
                                                                                                "consultas"
                                                                                            ]
                                                                               },
                                                                       "description":  "Lista consultas por ID da gestante (apoio). Preferir \u0027Consultar por CPF\u0027 quando a gestante não souber o ID. ROLE_PATIENT, ROLE_NURSE, ROLE_DOCTOR."
                                                                   },
                                                       "response":  [

                                                                    ]
                                                   }
                                               ]
                                  },
                                  {
                                      "name":  "Disponibilidade",
                                      "item":  [
                                                   {
                                                       "name":  "Consultar Horários Disponíveis",
                                                       "request":  {
                                                                       "method":  "GET",
                                                                       "header":  [
                                                                                      {
                                                                                          "key":  "Authorization",
                                                                                          "value":  "Bearer {{access_token}}",
                                                                                          "type":  "text"
                                                                                      }
                                                                                  ],
                                                                       "url":  {
                                                                                   "raw":  "{{base_url_agenda}}/api/disponibilidade?crm={{crm}}\u0026data={{data_consulta}}",
                                                                                   "host":  [
                                                                                                "{{base_url_agenda}}"
                                                                                            ],
                                                                                   "path":  [
                                                                                                "api",
                                                                                                "disponibilidade"
                                                                                            ],
                                                                                   "query":  [
                                                                                                 {
                                                                                                     "key":  "crm",
                                                                                                     "value":  "{{crm}}",
                                                                                                     "description":  "CRM do médico (ex.: 12345)"
                                                                                                 },
                                                                                                 {
                                                                                                     "key":  "data",
                                                                                                     "value":  "{{data_consulta}}",
                                                                                                     "description":  "Data no formato yyyy-MM-dd (ex: 2026-01-28)"
                                                                                                 }
                                                                                             ]
                                                                               },
                                                                       "description":  "Consulta os horários disponíveis de um médico em uma data. ROLE_DOCTOR, ROLE_NURSE, ROLE_PATIENT.\n\n- crm: CRM do médico (identificação por CRM, não por ID).\n- data: yyyy-MM-dd.\n\nResposta: medicoNome, especialidade, data, horariosDisponiveis[]. Ex.: {\"medicoNome\":\"Dr. João\",\"especialidade\":\"Obstetrícia\",\"data\":\"2026-01-28\",\"horariosDisponiveis\":[\"08:00\",\"08:30\",...]}\n\n404 se CRM não encontrado."
                                                                   },
                                                       "response":  [

                                                                    ]
                                                   }
                                               ]
                                  }
                              ]
                 },
                 {
                     "name":  "Prenatal Auth",
                     "description":  "Serviço de autenticação OAuth2/JWT. **Execute primeiro:** Obter Token OAuth2 para salvar o access_token. Sem token, os demais serviços retornam 401.",
                     "item":  [
                                  {
                                      "name":  "Health Check",
                                      "item":  [
                                                   {
                                                       "name":  "Verificar Status da API",
                                                       "request":  {
                                                                       "method":  "GET",
                                                                       "header":  [

                                                                                  ],
                                                                       "url":  {
                                                                                   "raw":  "{{base_url_auth}}/actuator/health",
                                                                                   "host":  [
                                                                                                "{{base_url_auth}}"
                                                                                            ],
                                                                                   "path":  [
                                                                                                "actuator",
                                                                                                "health"
                                                                                            ]
                                                                               },
                                                                       "description":  "Verifica o status de saúde da aplicação. Não requer autenticação."
                                                                   },
                                                       "response":  [

                                                                    ]
                                                   }
                                               ]
                                  },
                                  {
                                      "name":  "Autenticação",
                                      "item":  [
                                                   {
                                                       "name":  "Obter Token OAuth2 Paciente",
                                                       "event":  [
                                                                     {
                                                                         "listen":  "prerequest",
                                                                         "script":  {
                                                                                        "exec":  [
                                                                                                     "// Gera Basic Auth token automaticamente",
                                                                                                     "const clientId = pm.environment.get(\"client_id\");",
                                                                                                     "const clientSecret = pm.environment.get(\"client_secret\");",
                                                                                                     "const basicAuth = btoa(clientId + \":\" + clientSecret);",
                                                                                                     "pm.environment.set(\"basic_auth_token\", basicAuth);",
                                                                                                     "console.log(\"Basic Auth token gerado automaticamente\");"
                                                                                                 ],
                                                                                        "type":  "text/javascript",
                                                                                        "packages":  {

                                                                                                     },
                                                                                        "requests":  {

                                                                                                     }
                                                                                    }
                                                                     },
                                                                     {
                                                                         "listen":  "test",
                                                                         "script":  {
                                                                                        "exec":  [
                                                                                                     "if (pm.response.code === 200) {",
                                                                                                     "    var jsonData = pm.response.json();",
                                                                                                     "    pm.environment.set(\"access_token\", jsonData.access_token);",
                                                                                                     "    console.log(\"Token salvo: \" + jsonData.access_token);",
                                                                                                     "}"
                                                                                                 ],
                                                                                        "type":  "text/javascript",
                                                                                        "packages":  {

                                                                                                     },
                                                                                        "requests":  {

                                                                                                     }
                                                                                    }
                                                                     }
                                                                 ],
                                                       "request":  {
                                                                       "auth":  {
                                                                                    "type":  "basic",
                                                                                    "basic":  [
                                                                                                  {
                                                                                                      "key":  "password",
                                                                                                      "value":  "myclientsecret",
                                                                                                      "type":  "string"
                                                                                                  },
                                                                                                  {
                                                                                                      "key":  "username",
                                                                                                      "value":  "myclientid",
                                                                                                      "type":  "string"
                                                                                                  }
                                                                                              ]
                                                                                },
                                                                       "method":  "POST",
                                                                       "header":  [
                                                                                      {
                                                                                          "key":  "Content-Type",
                                                                                          "value":  "application/x-www-form-urlencoded"
                                                                                      },
                                                                                      {
                                                                                          "key":  "Authorization",
                                                                                          "value":  "Basic {{basic_auth_token}}",
                                                                                          "type":  "text"
                                                                                      }
                                                                                  ],
                                                                       "body":  {
                                                                                    "mode":  "urlencoded",
                                                                                    "urlencoded":  [
                                                                                                       {
                                                                                                           "key":  "grant_type",
                                                                                                           "value":  "password",
                                                                                                           "type":  "text"
                                                                                                       },
                                                                                                       {
                                                                                                           "key":  "username",
                                                                                                           "value":  "maria.silva@tuamaeaquelaursa.com",
                                                                                                           "type":  "text"
                                                                                                       },
                                                                                                       {
                                                                                                           "key":  "password",
                                                                                                           "value":  "senha123",
                                                                                                           "type":  "text"
                                                                                                       },
                                                                                                       {
                                                                                                           "key":  "scope",
                                                                                                           "value":  "read write",
                                                                                                           "type":  "text"
                                                                                                       }
                                                                                                   ]
                                                                                },
                                                                       "url":  {
                                                                                   "raw":  "{{base_url_auth}}/oauth2/token",
                                                                                   "host":  [
                                                                                                "{{base_url_auth}}"
                                                                                            ],
                                                                                   "path":  [
                                                                                                "oauth2",
                                                                                                "token"
                                                                                            ]
                                                                               },
                                                                       "description":  "Obtém token OAuth2 para o paciente Maria da Silva (email: maria.silva@tuamaeaquelaursa.com). O token é salvo em \u0027access_token\u0027."
                                                                   },
                                                       "response":  [

                                                                    ]
                                                   },
                                                   {
                                                       "name":  "Obter Token OAuth2 Enfermeira",
                                                       "event":  [
                                                                     {
                                                                         "listen":  "prerequest",
                                                                         "script":  {
                                                                                        "exec":  [
                                                                                                     "const clientId = pm.environment.get(\"client_id\");",
                                                                                                     "const clientSecret = pm.environment.get(\"client_secret\");",
                                                                                                     "const basicAuth = btoa(clientId + \":\" + clientSecret);",
                                                                                                     "pm.environment.set(\"basic_auth_token\", basicAuth);"
                                                                                                 ],
                                                                                        "type":  "text/javascript"
                                                                                    }
                                                                     },
                                                                     {
                                                                         "listen":  "test",
                                                                         "script":  {
                                                                                        "exec":  [
                                                                                                     "if (pm.response.code === 200) {",
                                                                                                     "    var jsonData = pm.response.json();",
                                                                                                     "    pm.environment.set(\"access_token\", jsonData.access_token);",
                                                                                                     "}"
                                                                                                 ],
                                                                                        "type":  "text/javascript"
                                                                                    }
                                                                     }
                                                                 ],
                                                       "request":  {
                                                                       "auth":  {
                                                                                    "type":  "basic",
                                                                                    "basic":  [
                                                                                                  {
                                                                                                      "key":  "password",
                                                                                                      "value":  "myclientsecret",
                                                                                                      "type":  "string"
                                                                                                  },
                                                                                                  {
                                                                                                      "key":  "username",
                                                                                                      "value":  "myclientid",
                                                                                                      "type":  "string"
                                                                                                  }
                                                                                              ]
                                                                                },
                                                                       "method":  "POST",
                                                                       "header":  [
                                                                                      {
                                                                                          "key":  "Content-Type",
                                                                                          "value":  "application/x-www-form-urlencoded"
                                                                                      },
                                                                                      {
                                                                                          "key":  "Authorization",
                                                                                          "value":  "Basic {{basic_auth_token}}",
                                                                                          "type":  "text"
                                                                                      }
                                                                                  ],
                                                                       "body":  {
                                                                                    "mode":  "urlencoded",
                                                                                    "urlencoded":  [
                                                                                                       {
                                                                                                           "key":  "grant_type",
                                                                                                           "value":  "password",
                                                                                                           "type":  "text"
                                                                                                       },
                                                                                                       {
                                                                                                           "key":  "username",
                                                                                                           "value":  "ana.costa@tuamaeaquelaursa.com",
                                                                                                           "type":  "text"
                                                                                                       },
                                                                                                       {
                                                                                                           "key":  "password",
                                                                                                           "value":  "senha123",
                                                                                                           "type":  "text"
                                                                                                       },
                                                                                                       {
                                                                                                           "key":  "scope",
                                                                                                           "value":  "read write",
                                                                                                           "type":  "text"
                                                                                                       }
                                                                                                   ]
                                                                                },
                                                                       "url":  {
                                                                                   "raw":  "{{base_url_auth}}/oauth2/token",
                                                                                   "host":  [
                                                                                                "{{base_url_auth}}"
                                                                                            ],
                                                                                   "path":  [
                                                                                                "oauth2",
                                                                                                "token"
                                                                                            ]
                                                                               },
                                                                       "description":  "Obtém token OAuth2 para a enfermeira Ana Costa (email: ana.costa@tuamaeaquelaursa.com). O token é salvo em \u0027access_token\u0027."
                                                                   },
                                                       "response":  [

                                                                    ]
                                                   },
                                                   {
                                                       "name":  "Obter Token OAuth2 Médico",
                                                       "event":  [
                                                                     {
                                                                         "listen":  "prerequest",
                                                                         "script":  {
                                                                                        "exec":  [
                                                                                                     "const clientId = pm.environment.get(\"client_id\");",
                                                                                                     "const clientSecret = pm.environment.get(\"client_secret\");",
                                                                                                     "const basicAuth = btoa(clientId + \":\" + clientSecret);",
                                                                                                     "pm.environment.set(\"basic_auth_token\", basicAuth);"
                                                                                                 ],
                                                                                        "type":  "text/javascript"
                                                                                    }
                                                                     },
                                                                     {
                                                                         "listen":  "test",
                                                                         "script":  {
                                                                                        "exec":  [
                                                                                                     "if (pm.response.code === 200) {",
                                                                                                     "    var jsonData = pm.response.json();",
                                                                                                     "    pm.environment.set(\"access_token\", jsonData.access_token);",
                                                                                                     "}"
                                                                                                 ],
                                                                                        "type":  "text/javascript"
                                                                                    }
                                                                     }
                                                                 ],
                                                       "request":  {
                                                                       "auth":  {
                                                                                    "type":  "basic",
                                                                                    "basic":  [
                                                                                                  {
                                                                                                      "key":  "password",
                                                                                                      "value":  "myclientsecret",
                                                                                                      "type":  "string"
                                                                                                  },
                                                                                                  {
                                                                                                      "key":  "username",
                                                                                                      "value":  "myclientid",
                                                                                                      "type":  "string"
                                                                                                  }
                                                                                              ]
                                                                                },
                                                                       "method":  "POST",
                                                                       "header":  [
                                                                                      {
                                                                                          "key":  "Content-Type",
                                                                                          "value":  "application/x-www-form-urlencoded"
                                                                                      },
                                                                                      {
                                                                                          "key":  "Authorization",
                                                                                          "value":  "Basic {{basic_auth_token}}",
                                                                                          "type":  "text"
                                                                                      }
                                                                                  ],
                                                                       "body":  {
                                                                                    "mode":  "urlencoded",
                                                                                    "urlencoded":  [
                                                                                                       {
                                                                                                           "key":  "grant_type",
                                                                                                           "value":  "password",
                                                                                                           "type":  "text"
                                                                                                       },
                                                                                                       {
                                                                                                           "key":  "username",
                                                                                                           "value":  "pedro.souza@tuamaeaquelaursa.com",
                                                                                                           "type":  "text"
                                                                                                       },
                                                                                                       {
                                                                                                           "key":  "password",
                                                                                                           "value":  "senha123",
                                                                                                           "type":  "text"
                                                                                                       },
                                                                                                       {
                                                                                                           "key":  "scope",
                                                                                                           "value":  "read write",
                                                                                                           "type":  "text"
                                                                                                       }
                                                                                                   ]
                                                                                },
                                                                       "url":  {
                                                                                   "raw":  "{{base_url_auth}}/oauth2/token",
                                                                                   "host":  [
                                                                                                "{{base_url_auth}}"
                                                                                            ],
                                                                                   "path":  [
                                                                                                "oauth2",
                                                                                                "token"
                                                                                            ]
                                                                               },
                                                                       "description":  "Obtém token OAuth2 para o médico Dr. Pedro Souza (email: pedro.souza@tuamaeaquelaursa.com). O token é salvo em \u0027access_token\u0027."
                                                                   },
                                                       "response":  [

                                                                    ]
                                                   }
                                               ]
                                  },
                                  {
                                      "name":  "Usuários",
                                      "item":  [
                                                   {
                                                       "name":  "Criar Usuário Paciente",
                                                       "request":  {
                                                                       "method":  "POST",
                                                                       "header":  [
                                                                                      {
                                                                                          "key":  "Content-Type",
                                                                                          "value":  "application/json"
                                                                                      },
                                                                                      {
                                                                                          "key":  "Authorization",
                                                                                          "value":  "Bearer {{access_token}}",
                                                                                          "type":  "text"
                                                                                      }
                                                                                  ],
                                                                       "body":  {
                                                                                    "mode":  "raw",
                                                                                    "raw":  "{\n    \"nome\": \"Maria da Silva\",\n    \"email\": \"maria.silva@tuamaeaquelaursa.com\",\n    \"login\": \"maria.silva\",\n    \"cpf\": \"12345678900\",\n    \"senha\": \"senha123\",\n    \"perfil\": \"ROLE_PATIENT\",\n    \"endereco\": {\n        \"rua\": \"R. Maria Marciana Dos Santos, Zona Rural Capão\",\n        \"numero\": 628,\n        \"cidade\": \"Nova Serrana\",\n        \"estado\": \"MG\",\n        \"cep\": \"35519-000\"\n    }\n}",
                                                                                    "options":  {
                                                                                                    "raw":  {
                                                                                                                "language":  "json"
                                                                                                            }
                                                                                                }
                                                                                },
                                                                       "url":  {
                                                                                   "raw":  "{{base_url_auth}}/v1/usuarios",
                                                                                   "host":  [
                                                                                                "{{base_url_auth}}"
                                                                                            ],
                                                                                   "path":  [
                                                                                                "v1",
                                                                                                "usuarios"
                                                                                            ]
                                                                               },
                                                                       "description":  "Cria um novo usuário paciente no sistema. CPF obrigatório (11 dígitos)."
                                                                   },
                                                       "response":  [

                                                                    ]
                                                   },
                                                   {
                                                       "name":  "Criar Usuário Enfermeira",
                                                       "request":  {
                                                                       "method":  "POST",
                                                                       "header":  [
                                                                                      {
                                                                                          "key":  "Content-Type",
                                                                                          "value":  "application/json"
                                                                                      },
                                                                                      {
                                                                                          "key":  "Authorization",
                                                                                          "value":  "Bearer {{access_token}}",
                                                                                          "type":  "text"
                                                                                      }
                                                                                  ],
                                                                       "body":  {
                                                                                    "mode":  "raw",
                                                                                    "raw":  "{\n    \"nome\": \"Ana Costa\",\n    \"email\": \"ana.costa@tuamaeaquelaursa.com\",\n    \"login\": \"ana.costa\",\n    \"cpf\": \"12345678902\",\n    \"senha\": \"senha123\",\n    \"perfil\": \"ROLE_NURSE\",\n    \"endereco\": {\n        \"rua\": \"R. Maria Marciana Dos Santos, Zona Rural Capão\",\n        \"numero\": 628,\n        \"cidade\": \"Nova Serrana\",\n        \"estado\": \"MG\",\n        \"cep\": \"35519-000\"\n    }\n}",
                                                                                    "options":  {
                                                                                                    "raw":  {
                                                                                                                "language":  "json"
                                                                                                            }
                                                                                                }
                                                                                },
                                                                       "url":  {
                                                                                   "raw":  "{{base_url_auth}}/v1/usuarios",
                                                                                   "host":  [
                                                                                                "{{base_url_auth}}"
                                                                                            ],
                                                                                   "path":  [
                                                                                                "v1",
                                                                                                "usuarios"
                                                                                            ]
                                                                               },
                                                                       "description":  "Cria um novo usuário enfermeira (ROLE_NURSE). CPF obrigatório (11 dígitos). Use o token de um usuário já existente (ex.: médico ou admin) para criar."
                                                                   },
                                                       "response":  [

                                                                    ]
                                                   },
                                                   {
                                                       "name":  "Criar Usuário Médico",
                                                       "request":  {
                                                                       "method":  "POST",
                                                                       "header":  [
                                                                                      {
                                                                                          "key":  "Content-Type",
                                                                                          "value":  "application/json"
                                                                                      },
                                                                                      {
                                                                                          "key":  "Authorization",
                                                                                          "value":  "Bearer {{access_token}}",
                                                                                          "type":  "text"
                                                                                      }
                                                                                  ],
                                                                       "body":  {
                                                                                    "mode":  "raw",
                                                                                    "raw":  "{\n    \"nome\": \"Dr. Pedro Souza\",\n    \"email\": \"pedro.souza@tuamaeaquelaursa.com\",\n    \"login\": \"pedro.souza\",\n    \"cpf\": \"12345678903\",\n    \"senha\": \"senha123\",\n    \"perfil\": \"ROLE_DOCTOR\",\n    \"endereco\": {\n        \"rua\": \"R. Maria Marciana Dos Santos, Zona Rural Capão\",\n        \"numero\": 628,\n        \"cidade\": \"Nova Serrana\",\n        \"estado\": \"MG\",\n        \"cep\": \"35519-000\"\n    }\n}",
                                                                                    "options":  {
                                                                                                    "raw":  {
                                                                                                                "language":  "json"
                                                                                                            }
                                                                                                }
                                                                                },
                                                                       "url":  {
                                                                                   "raw":  "{{base_url_auth}}/v1/usuarios",
                                                                                   "host":  [
                                                                                                "{{base_url_auth}}"
                                                                                            ],
                                                                                   "path":  [
                                                                                                "v1",
                                                                                                "usuarios"
                                                                                            ]
                                                                               },
                                                                       "description":  "Cria um novo usuário médico (ROLE_DOCTOR). CPF obrigatório (11 dígitos). Para o primeiro médico, use um token de usuário criado via migration/seed ou crie-o sem auth se a API permitir em dev."
                                                                   },
                                                       "response":  [

                                                                    ]
                                                   },
                                                   {
                                                       "name":  "Buscar Usuário por ID",
                                                       "request":  {
                                                                       "auth":  {
                                                                                    "type":  "bearer",
                                                                                    "bearer":  [
                                                                                                   {
                                                                                                       "key":  "token",
                                                                                                       "value":  "{{access_token}}",
                                                                                                       "type":  "string"
                                                                                                   }
                                                                                               ]
                                                                                },
                                                                       "method":  "GET",
                                                                       "header":  [
                                                                                      {
                                                                                          "key":  "Authorization",
                                                                                          "value":  "Bearer {{access_token}}",
                                                                                          "type":  "text"
                                                                                      }
                                                                                  ],
                                                                       "url":  {
                                                                                   "raw":  "{{base_url_auth}}/v1/usuarios/{{user_id}}",
                                                                                   "host":  [
                                                                                                "{{base_url_auth}}"
                                                                                            ],
                                                                                   "path":  [
                                                                                                "v1",
                                                                                                "usuarios",
                                                                                                "{{user_id}}"
                                                                                            ]
                                                                               },
                                                                       "description":  "Busca um usuário específico pelo seu ID"
                                                                   },
                                                       "response":  [

                                                                    ]
                                                   },
                                                   {
                                                       "name":  "Atualizar Usuário",
                                                       "request":  {
                                                                       "auth":  {
                                                                                    "type":  "bearer",
                                                                                    "bearer":  [
                                                                                                   {
                                                                                                       "key":  "token",
                                                                                                       "value":  "{{access_token}}",
                                                                                                       "type":  "string"
                                                                                                   }
                                                                                               ]
                                                                                },
                                                                       "method":  "PUT",
                                                                       "header":  [
                                                                                      {
                                                                                          "key":  "Content-Type",
                                                                                          "value":  "application/json"
                                                                                      },
                                                                                      {
                                                                                          "key":  "Authorization",
                                                                                          "value":  "Bearer {{access_token}}",
                                                                                          "type":  "text"
                                                                                      }
                                                                                  ],
                                                                       "body":  {
                                                                                    "mode":  "raw",
                                                                                    "raw":  "{\n    \"nome\": \"João Silva Atualizado\",\n    \"email\": \"joao.silva.updated@example.com\",\n    \"login\": \"joao.silva.updated\",\n    \"senha\": \"novaSenha123\",\n    \"perfil\": \"ROLE_PATIENT\",\n    \"endereco\": {\n        \"rua\": \"Rua das Flores Atualizada\",\n        \"numero\": 456,\n        \"cidade\": \"São Paulo\",\n        \"estado\": \"SP\",\n        \"cep\": \"01234-567\"\n    }\n}",
                                                                                    "options":  {
                                                                                                    "raw":  {
                                                                                                                "language":  "json"
                                                                                                            }
                                                                                                }
                                                                                },
                                                                       "url":  {
                                                                                   "raw":  "{{base_url_auth}}/v1/usuarios/{{user_id}}",
                                                                                   "host":  [
                                                                                                "{{base_url_auth}}"
                                                                                            ],
                                                                                   "path":  [
                                                                                                "v1",
                                                                                                "usuarios",
                                                                                                "{{user_id}}"
                                                                                            ]
                                                                               },
                                                                       "description":  "Atualiza os dados de um usuário existente"
                                                                   },
                                                       "response":  [

                                                                    ]
                                                   },
                                                   {
                                                       "name":  "Atualizar Senha",
                                                       "request":  {
                                                                       "auth":  {
                                                                                    "type":  "bearer",
                                                                                    "bearer":  [
                                                                                                   {
                                                                                                       "key":  "token",
                                                                                                       "value":  "{{access_token}}",
                                                                                                       "type":  "string"
                                                                                                   }
                                                                                               ]
                                                                                },
                                                                       "method":  "PATCH",
                                                                       "header":  [
                                                                                      {
                                                                                          "key":  "Content-Type",
                                                                                          "value":  "application/json"
                                                                                      },
                                                                                      {
                                                                                          "key":  "Authorization",
                                                                                          "value":  "Bearer {{access_token}}",
                                                                                          "type":  "text"
                                                                                      }
                                                                                  ],
                                                                       "body":  {
                                                                                    "mode":  "raw",
                                                                                    "raw":  "{\n    \"senha\": \"novaSenhaSegura123\"\n}",
                                                                                    "options":  {
                                                                                                    "raw":  {
                                                                                                                "language":  "json"
                                                                                                            }
                                                                                                }
                                                                                },
                                                                       "url":  {
                                                                                   "raw":  "{{base_url_auth}}/v1/usuarios/{{user_id}}/senha",
                                                                                   "host":  [
                                                                                                "{{base_url_auth}}"
                                                                                            ],
                                                                                   "path":  [
                                                                                                "v1",
                                                                                                "usuarios",
                                                                                                "{{user_id}}",
                                                                                                "senha"
                                                                                            ]
                                                                               },
                                                                       "description":  "Atualiza a senha de um usuário específico"
                                                                   },
                                                       "response":  [

                                                                    ]
                                                   }
                                               ]
                                  }
                              ]
                 },
                 {
                     "name":  "Prenatal Documento",
                     "description":  "Serviço de documentos médicos e vacinas. Upload de exames (PDF), registro de vacinas. Requer token JWT e LocalStack S3.",
                     "item":  [
                                  {
                                      "name":  "Documents",
                                      "item":  [
                                                   {
                                                       "name":  "Upload Document",
                                                       "event":  [
                                                                     {
                                                                         "listen":  "test",
                                                                         "script":  {
                                                                                        "exec":  [
                                                                                                     "if (pm.response.code === 201) {",
                                                                                                     "    const res = pm.response.json();",
                                                                                                     "    if (res.id) {",
                                                                                                     "        pm.collectionVariables.set(\"documentId\", String(res.id));",
                                                                                                     "        try { pm.environment.set(\"documentId\", String(res.id)); } catch (e) {}",
                                                                                                     "    }",
                                                                                                     "    if (res.gestanteCpf) {",
                                                                                                     "        pm.collectionVariables.set(\"patientCpf\", res.gestanteCpf);",
                                                                                                     "        try { pm.environment.set(\"patientCpf\", res.gestanteCpf); } catch (e) {}",
                                                                                                     "    }",
                                                                                                     "}"
                                                                                                 ],
                                                                                        "type":  "text/javascript"
                                                                                    }
                                                                     }
                                                                 ],
                                                       "request":  {
                                                                       "method":  "POST",
                                                                       "header":  [
                                                                                      {
                                                                                          "key":  "Authorization",
                                                                                          "value":  "Bearer {{jwtToken}}",
                                                                                          "type":  "text"
                                                                                      }
                                                                                  ],
                                                                       "body":  {
                                                                                    "mode":  "formdata",
                                                                                    "formdata":  [
                                                                                                     {
                                                                                                         "key":  "file",
                                                                                                         "type":  "file",
                                                                                                         "src":  [

                                                                                                                 ],
                                                                                                         "description":  "Arquivo PDF (máximo 10MB)"
                                                                                                     },
                                                                                                     {
                                                                                                         "key":  "documentType",
                                                                                                         "value":  "EXAM",
                                                                                                         "type":  "text",
                                                                                                         "description":  "Tipo de documento: EXAM ou ULTRASOUND"
                                                                                                     },
                                                                                                     {
                                                                                                         "key":  "examType",
                                                                                                         "value":  "",
                                                                                                         "type":  "text",
                                                                                                         "description":  "Tipo específico (opcional). Ex: MORPHOLOGICAL_ULTRASOUND, NUCHAL_TRANSLUCENCY, CURVA_GLICEMICA, GLICEMIA. Usado pela IA."
                                                                                                     }
                                                                                                 ]
                                                                                },
                                                                       "url":  {
                                                                                   "raw":  "{{base_url_documento}}/api/prenatal-records/:cpf/documents",
                                                                                   "host":  [
                                                                                                "{{base_url_documento}}"
                                                                                            ],
                                                                                   "path":  [
                                                                                                "api",
                                                                                                "prenatal-records",
                                                                                                ":cpf",
                                                                                                "documents"
                                                                                            ],
                                                                                   "variable":  [
                                                                                                    {
                                                                                                        "key":  "cpf",
                                                                                                        "value":  "{{patientCpf}}",
                                                                                                        "description":  "CPF da paciente (apenas números)"
                                                                                                    }
                                                                                                ]
                                                                               },
                                                                       "description":  "Upload de documento (exame ou ultrassom) em PDF.\n\n**Roles permitidas:** PATIENT, NURSE, DOCTOR\n\n**Validações:**\n- Apenas arquivos PDF\n- Tamanho máximo: 10MB\n- documentType: EXAM ou ULTRASOUND\n- examType (opcional): MORPHOLOGICAL_ULTRASOUND, NUCHAL_TRANSLUCENCY, CURVA_GLICEMICA, GLICEMIA - usado pela IA para regras clínicas\n\n**Response:** inclui tipoExame quando informado"
                                                                   },
                                                       "response":  [

                                                                    ]
                                                   },
                                                   {
                                                       "name":  "List Active Documents",
                                                       "event":  [
                                                                     {
                                                                         "listen":  "test",
                                                                         "script":  {
                                                                                        "exec":  [
                                                                                                     "if (pm.response.code === 200) {",
                                                                                                     "    const docs = pm.response.json();",
                                                                                                     "    if (Array.isArray(docs) \u0026\u0026 docs.length \u003e 0 \u0026\u0026 docs[0].id) {",
                                                                                                     "        pm.collectionVariables.set(\"documentId\", String(docs[0].id));",
                                                                                                     "        try { pm.environment.set(\"documentId\", String(docs[0].id)); } catch (e) {}",
                                                                                                     "        if (docs[0].gestanteCpf) {",
                                                                                                     "            pm.collectionVariables.set(\"patientCpf\", docs[0].gestanteCpf);",
                                                                                                     "            try { pm.environment.set(\"patientCpf\", docs[0].gestanteCpf); } catch (e) {}",
                                                                                                     "        }",
                                                                                                     "    }",
                                                                                                     "}"
                                                                                                 ],
                                                                                        "type":  "text/javascript"
                                                                                    }
                                                                     }
                                                                 ],
                                                       "request":  {
                                                                       "method":  "GET",
                                                                       "header":  [
                                                                                      {
                                                                                          "key":  "Authorization",
                                                                                          "value":  "Bearer {{jwtToken}}",
                                                                                          "type":  "text"
                                                                                      }
                                                                                  ],
                                                                       "url":  {
                                                                                   "raw":  "{{base_url_documento}}/api/prenatal-records/:cpf/documents",
                                                                                   "host":  [
                                                                                                "{{base_url_documento}}"
                                                                                            ],
                                                                                   "path":  [
                                                                                                "api",
                                                                                                "prenatal-records",
                                                                                                ":cpf",
                                                                                                "documents"
                                                                                            ],
                                                                                   "variable":  [
                                                                                                    {
                                                                                                        "key":  "cpf",
                                                                                                        "value":  "{{patientCpf}}",
                                                                                                        "description":  "CPF da paciente (apenas números)"
                                                                                                    }
                                                                                                ]
                                                                               },
                                                                       "description":  "Lista todos os documentos ativos de uma paciente pelo CPF.\n\n**Roles permitidas:** PATIENT, NURSE, DOCTOR"
                                                                   },
                                                       "response":  [

                                                                    ]
                                                   },
                                                   {
                                                       "name":  "Download Document",
                                                       "request":  {
                                                                       "method":  "GET",
                                                                       "header":  [
                                                                                      {
                                                                                          "key":  "Authorization",
                                                                                          "value":  "Bearer {{jwtToken}}",
                                                                                          "type":  "text"
                                                                                      }
                                                                                  ],
                                                                       "url":  {
                                                                                   "raw":  "{{base_url_documento}}/api/documents/:id/download",
                                                                                   "host":  [
                                                                                                "{{base_url_documento}}"
                                                                                            ],
                                                                                   "path":  [
                                                                                                "api",
                                                                                                "documents",
                                                                                                ":id",
                                                                                                "download"
                                                                                            ],
                                                                                   "variable":  [
                                                                                                    {
                                                                                                        "key":  "id",
                                                                                                        "value":  "{{documentId}}",
                                                                                                        "description":  "ID do documento (UUID)"
                                                                                                    }
                                                                                                ]
                                                                               },
                                                                       "description":  "Faz download de um documento PDF.\n\n**Roles permitidas:** PATIENT, NURSE, DOCTOR\n\n**Response:** Arquivo PDF binário"
                                                                   },
                                                       "response":  [

                                                                    ]
                                                   },
                                                   {
                                                       "name":  "Inactivate Document",
                                                       "request":  {
                                                                       "method":  "PATCH",
                                                                       "header":  [
                                                                                      {
                                                                                          "key":  "Authorization",
                                                                                          "value":  "Bearer {{jwtToken}}",
                                                                                          "type":  "text"
                                                                                      }
                                                                                  ],
                                                                       "url":  {
                                                                                   "raw":  "{{base_url_documento}}/api/documents/:id/inactivate",
                                                                                   "host":  [
                                                                                                "{{base_url_documento}}"
                                                                                            ],
                                                                                   "path":  [
                                                                                                "api",
                                                                                                "documents",
                                                                                                ":id",
                                                                                                "inactivate"
                                                                                            ],
                                                                                   "variable":  [
                                                                                                    {
                                                                                                        "key":  "id",
                                                                                                        "value":  "{{documentId}}",
                                                                                                        "description":  "ID do documento (UUID)"
                                                                                                    }
                                                                                                ]
                                                                               },
                                                                       "description":  "Inativa um documento (soft delete). O documento não será mais listado, mas permanece no banco de dados.\n\n**Roles permitidas:** NURSE, DOCTOR\n\n**Response:** 204 No Content"
                                                                   },
                                                       "response":  [

                                                                    ]
                                                   },
                                                   {
                                                       "name":  "Delete Document Permanently",
                                                       "request":  {
                                                                       "method":  "DELETE",
                                                                       "header":  [
                                                                                      {
                                                                                          "key":  "Authorization",
                                                                                          "value":  "Bearer {{jwtToken}}",
                                                                                          "type":  "text"
                                                                                      }
                                                                                  ],
                                                                       "url":  {
                                                                                   "raw":  "{{base_url_documento}}/api/documents/:id/permanent",
                                                                                   "host":  [
                                                                                                "{{base_url_documento}}"
                                                                                            ],
                                                                                   "path":  [
                                                                                                "api",
                                                                                                "documents",
                                                                                                ":id",
                                                                                                "permanent"
                                                                                            ],
                                                                                   "variable":  [
                                                                                                    {
                                                                                                        "key":  "id",
                                                                                                        "value":  "{{documentId}}",
                                                                                                        "description":  "ID do documento (UUID)"
                                                                                                    }
                                                                                                ]
                                                                               },
                                                                       "description":  "Exclui permanentemente um documento (hard delete). Remove o arquivo do S3 e os metadados do banco de dados.\n\n**Roles permitidas:** NURSE, DOCTOR\n\n**Response:** 204 No Content\n\n**âš ï¸ ATENÇÃO:** Esta aÃ§Ã£o Ã© irreversível!"
                                                                   },
                                                       "response":  [

                                                                    ]
                                                   },
                                                   {
                                                       "name":  "Request Document Deletion",
                                                       "request":  {
                                                                       "method":  "POST",
                                                                       "header":  [
                                                                                      {
                                                                                          "key":  "Authorization",
                                                                                          "value":  "Bearer {{jwtToken}}",
                                                                                          "type":  "text"
                                                                                      }
                                                                                  ],
                                                                       "url":  {
                                                                                   "raw":  "{{base_url_documento}}/api/documents/:id/request-delete",
                                                                                   "host":  [
                                                                                                "{{base_url_documento}}"
                                                                                            ],
                                                                                   "path":  [
                                                                                                "api",
                                                                                                "documents",
                                                                                                ":id",
                                                                                                "request-delete"
                                                                                            ],
                                                                                   "variable":  [
                                                                                                    {
                                                                                                        "key":  "id",
                                                                                                        "value":  "{{documentId}}",
                                                                                                        "description":  "ID do documento (UUID)"
                                                                                                    }
                                                                                                ]
                                                                               },
                                                                       "description":  "Solicita a exclusão de um documento. Cria uma solicitação que precisa ser aprovada por um profissional (NURSE ou DOCTOR).\n\n**Roles permitidas:** PATIENT\n\n**Response:** 202 Accepted"
                                                                   },
                                                       "response":  [

                                                                    ]
                                                   }
                                               ],
                                      "description":  "Endpoints para gerenciamento de documentos médicos"
                                  },
                                  {
                                      "name":  "Vaccines",
                                      "item":  [
                                                   {
                                                       "name":  "Registrar Vacina",
                                                       "request":  {
                                                                       "method":  "POST",
                                                                       "header":  [
                                                                                      {
                                                                                          "key":  "Authorization",
                                                                                          "value":  "Bearer {{jwtToken}}",
                                                                                          "type":  "text"
                                                                                      }
                                                                                  ],
                                                                       "url":  {
                                                                                   "raw":  "{{base_url_documento}}/api/prenatal-records/:cpf/vacinas?tipoVacina=DTpa\u0026dataAplicacao=2025-01-15",
                                                                                   "host":  [
                                                                                                "{{base_url_documento}}"
                                                                                            ],
                                                                                   "path":  [
                                                                                                "api",
                                                                                                "prenatal-records",
                                                                                                ":cpf",
                                                                                                "vacinas"
                                                                                            ],
                                                                                   "query":  [
                                                                                                 {
                                                                                                     "key":  "tipoVacina",
                                                                                                     "value":  "DTpa",
                                                                                                     "description":  "Tipo da vacina (ex: DTpa, Hepatite B, Influenza)"
                                                                                                 },
                                                                                                 {
                                                                                                     "key":  "dataAplicacao",
                                                                                                     "value":  "2025-01-15",
                                                                                                     "description":  "Data da aplicação (yyyy-MM-dd)"
                                                                                                 }
                                                                                             ],
                                                                                   "variable":  [
                                                                                                    {
                                                                                                        "key":  "cpf",
                                                                                                        "value":  "{{patientCpf}}",
                                                                                                        "description":  "CPF da paciente (apenas números)"
                                                                                                    }
                                                                                                ]
                                                                               },
                                                                       "description":  "Registra a aplicação de uma vacina para a gestante.\n\n**Roles permitidas:** PATIENT, NURSE, DOCTOR\n\n**Parâmetros:**\n- tipoVacina: ex. DTpa, Hepatite B, Influenza\n- dataAplicacao: yyyy-MM-dd\n\n**Response:** 201 com VaccineResponse (id, gestanteCpf, tipoVacina, dataAplicacao)"
                                                                   },
                                                       "response":  [

                                                                    ]
                                                   }
                                               ],
                                      "description":  "Endpoints para registro de vacinas da gestante"
                                  },
                                  {
                                      "name":  "Health Check",
                                      "item":  [
                                                   {
                                                       "name":  "Health",
                                                       "request":  {
                                                                       "method":  "GET",
                                                                       "header":  [

                                                                                  ],
                                                                       "url":  {
                                                                                   "raw":  "{{base_url_documento}}/actuator/health",
                                                                                   "host":  [
                                                                                                "{{base_url_documento}}"
                                                                                            ],
                                                                                   "path":  [
                                                                                                "actuator",
                                                                                                "health"
                                                                                            ]
                                                                               },
                                                                       "description":  "Endpoint de health check da aplicação (não requer autenticação)"
                                                                   },
                                                       "response":  [

                                                                    ]
                                                   }
                                               ],
                                      "description":  "Endpoints de monitoramento"
                                  }
                              ]
                 },
                 {
                     "name":  "Prenatal Prontuario",
                     "description":  "Serviço de prontuário eletrônico. **Ordem:** 1) Criar prontuário na primeira consulta 2) Demais operações. Requer token JWT.",
                     "item":  [
                                  {
                                      "name":  "Health Check",
                                      "item":  [
                                                   {
                                                       "name":  "Verificar Status da API",
                                                       "request":  {
                                                                       "method":  "GET",
                                                                       "header":  [

                                                                                  ],
                                                                       "url":  {
                                                                                   "raw":  "{{base_url_prontuario}}/actuator/health",
                                                                                   "host":  [
                                                                                                "{{base_url_prontuario}}"
                                                                                            ],
                                                                                   "path":  [
                                                                                                "actuator",
                                                                                                "health"
                                                                                            ]
                                                                               },
                                                                       "description":  "Verifica o status de saúde da aplicação. Não requer autenticação."
                                                                   },
                                                       "response":  [

                                                                    ]
                                                   }
                                               ]
                                  },
                                  {
                                      "name":  "Prontuários",
                                      "item":  [
                                                   {
                                                       "name":  "Criar prontuário (primeira consulta)",
                                                       "request":  {
                                                                       "method":  "POST",
                                                                       "header":  [
                                                                                      {
                                                                                          "key":  "Content-Type",
                                                                                          "value":  "application/json"
                                                                                      },
                                                                                      {
                                                                                          "key":  "Authorization",
                                                                                          "value":  "Bearer {{access_token}}",
                                                                                          "type":  "text"
                                                                                      }
                                                                                  ],
                                                                       "body":  {
                                                                                    "mode":  "raw",
                                                                                    "raw":  "{\n  \"cpf\": \"12345678900\",\n  \"nomeCompleto\": \"Maria da Silva\",\n  \"dataNascimento\": \"1992-04-15\",\n  \"dataUltimaMenstruacao\": \"2025-01-10\",\n  \"dataConsulta\": \"2025-02-15\",\n  \"tipoGestacao\": \"UNICA\",\n  \"tipoParto\": \"NAO_DEFINIDO\",\n  \"numeroGestacoesAnteriores\": 1,\n  \"numeroPartos\": 1,\n  \"numeroAbortos\": 0,\n  \"gestacaoAltoRisco\": false,\n  \"motivoAltoRisco\": null,\n  \"fatoresRisco\": [],\n  \"usoVitaminas\": true,\n  \"usoAAS\": false,\n  \"observacoes\": \"Primeira consulta realizada na unidade.\",\n  \"emailPaciente\": \"maria.silva@tuamaeaquelaursa.com\",\n  \"medicoNome\": \"Dr. Pedro Souza\",\n  \"medicoEmail\": \"pedro.souza@tuamaeaquelaursa.com\"\n}",
                                                                                    "options":  {
                                                                                                    "raw":  {
                                                                                                                "language":  "json"
                                                                                                            }
                                                                                                }
                                                                                },
                                                                       "url":  {
                                                                                   "raw":  "{{base_url_prontuario}}/api/v1/prontuarios",
                                                                                   "host":  [
                                                                                                "{{base_url_prontuario}}"
                                                                                            ],
                                                                                   "path":  [
                                                                                                "api",
                                                                                                "v1",
                                                                                                "prontuarios"
                                                                                            ]
                                                                               },
                                                                       "description":  "Cria o prontuário na primeira consulta. Obrigatório: cpf (11 dígitos), dataUltimaMenstruacao. Idade gestacional = semanas entre dataUltimaMenstruacao e dataConsulta (ou hoje se dataConsulta omitida); deve ser 1â€“44. dataConsulta (opcional): para retroativo/testes. tipoParto (opcional): PARTO_NATURAL, CESARIANA ou NAO_DEFINIDO; omitir = NAO_DEFINIDO. Opcional: emailPaciente, medicoNome, medicoEmail (contato e médico responsável para notificações/IA). Um prontuário por CPF. Acesso: ENFERMEIRO, MEDICO, NURSE, DOCTOR."
                                                                   },
                                                       "response":  [

                                                                    ]
                                                   },
                                                   {
                                                       "name":  "Buscar prontuário por CPF",
                                                       "request":  {
                                                                       "method":  "GET",
                                                                       "header":  [
                                                                                      {
                                                                                          "key":  "Authorization",
                                                                                          "value":  "Bearer {{access_token}}",
                                                                                          "type":  "text"
                                                                                      }
                                                                                  ],
                                                                       "url":  {
                                                                                   "raw":  "{{base_url_prontuario}}/api/v1/prontuarios/cpf/{{cpf}}",
                                                                                   "host":  [
                                                                                                "{{base_url_prontuario}}"
                                                                                            ],
                                                                                   "path":  [
                                                                                                "api",
                                                                                                "v1",
                                                                                                "prontuarios",
                                                                                                "cpf",
                                                                                                "{{cpf}}"
                                                                                            ]
                                                                               },
                                                                       "description":  "Busca prontuário por CPF (11 dígitos). Gestante: apenas o próprio (JWT com claim cpf). Profissionais: qualquer CPF."
                                                                   },
                                                       "response":  [

                                                                    ]
                                                   },
                                                   {
                                                       "name":  "Atualizar dados clínicos",
                                                       "request":  {
                                                                       "method":  "PUT",
                                                                       "header":  [
                                                                                      {
                                                                                          "key":  "Content-Type",
                                                                                          "value":  "application/json"
                                                                                      },
                                                                                      {
                                                                                          "key":  "Authorization",
                                                                                          "value":  "Bearer {{access_token}}",
                                                                                          "type":  "text"
                                                                                      }
                                                                                  ],
                                                                       "body":  {
                                                                                    "mode":  "raw",
                                                                                    "raw":  "{\n  \"usoVitaminas\": true,\n  \"usoAAS\": true,\n  \"observacoes\": \"GestaÃ§Ã£o evoluindo bem\",\n  \"tipoParto\": \"CESARIANA\",\n  \"emailPaciente\": \"maria.silva@tuamaeaquelaursa.com\",\n  \"medicoNome\": \"Dr. Pedro Souza\",\n  \"medicoEmail\": \"pedro.souza@tuamaeaquelaursa.com\"\n}",
                                                                                    "options":  {
                                                                                                    "raw":  {
                                                                                                                "language":  "json"
                                                                                                            }
                                                                                                }
                                                                                },
                                                                       "url":  {
                                                                                   "raw":  "{{base_url_prontuario}}/api/v1/prontuarios/cpf/{{cpf}}",
                                                                                   "host":  [
                                                                                                "{{base_url_prontuario}}"
                                                                                            ],
                                                                                   "path":  [
                                                                                                "api",
                                                                                                "v1",
                                                                                                "prontuarios",
                                                                                                "cpf",
                                                                                                "{{cpf}}"
                                                                                            ]
                                                                               },
                                                                       "description":  "Atualiza usoVitaminas, usoAAS, observacoes, tipoParto, emailPaciente, medicoNome, medicoEmail. Campos null ou omitidos não alteram. tipoParto: PARTO_NATURAL, CESARIANA ou NAO_DEFINIDO. Acesso: ENFERMEIRO, MEDICO. Path: CPF do prontuário."
                                                                   },
                                                       "response":  [

                                                                    ]
                                                   },
                                                   {
                                                       "name":  "Atualizar fatores de risco",
                                                       "request":  {
                                                                       "method":  "PATCH",
                                                                       "header":  [
                                                                                      {
                                                                                          "key":  "Content-Type",
                                                                                          "value":  "application/json"
                                                                                      },
                                                                                      {
                                                                                          "key":  "Authorization",
                                                                                          "value":  "Bearer {{access_token}}",
                                                                                          "type":  "text"
                                                                                      }
                                                                                  ],
                                                                       "body":  {
                                                                                    "mode":  "raw",
                                                                                    "raw":  "{\n  \"fatoresRisco\": [\"HIPERTENSAO\", \"OBESIDADE\"]\n}",
                                                                                    "options":  {
                                                                                                    "raw":  {
                                                                                                                "language":  "json"
                                                                                                            }
                                                                                                }
                                                                                },
                                                                       "url":  {
                                                                                   "raw":  "{{base_url_prontuario}}/api/v1/prontuarios/cpf/{{cpf}}/fatores-risco",
                                                                                   "host":  [
                                                                                                "{{base_url_prontuario}}"
                                                                                            ],
                                                                                   "path":  [
                                                                                                "api",
                                                                                                "v1",
                                                                                                "prontuarios",
                                                                                                "cpf",
                                                                                                "{{cpf}}",
                                                                                                "fatores-risco"
                                                                                            ]
                                                                               },
                                                                       "description":  "Substitui a lista de fatores de risco. Acesso: ENFERMEIRO, MEDICO. Path: CPF do prontuário."
                                                                   },
                                                       "response":  [

                                                                    ]
                                                   },
                                                   {
                                                       "name":  "Consultar histórico do prontuário",
                                                       "request":  {
                                                                       "method":  "GET",
                                                                       "header":  [
                                                                                      {
                                                                                          "key":  "Authorization",
                                                                                          "value":  "Bearer {{access_token}}",
                                                                                          "type":  "text"
                                                                                      }
                                                                                  ],
                                                                       "url":  {
                                                                                   "raw":  "{{base_url_prontuario}}/api/v1/prontuarios/cpf/{{cpf}}/historico",
                                                                                   "host":  [
                                                                                                "{{base_url_prontuario}}"
                                                                                            ],
                                                                                   "path":  [
                                                                                                "api",
                                                                                                "v1",
                                                                                                "prontuarios",
                                                                                                "cpf",
                                                                                                "{{cpf}}",
                                                                                                "historico"
                                                                                            ]
                                                                               },
                                                                       "description":  "Retorna data, profissionalUserId e alteracao. Gestante: apenas o próprio (JWT claim cpf). Path: CPF do prontuário."
                                                                   },
                                                       "response":  [

                                                                    ]
                                                   }
                                               ]
                                  }
                              ]
                 }
             ],
    "info":  {
                 "description":  "# Prenatal Digital SUS - API Unificada\n\nCollection unificada dos serviços: Auth, Agenda, Documento e Prontuário.\n\n## Environment\nUse o environment **Prenatal-Digital-SUS-Local**.\n\n## Ordem de Execução Recomendada\n\n### 1. Prenatal Auth (obter token primeiro)\n- **Health Check** - Verificar se o serviço está rodando\n- **Obter Token OAuth2** (Paciente, Enfermeira ou Médico) - Obtém o JWT e salva em `access_token`\n- **Criar Usuários** (se necessário) - Paciente, Enfermeira, Médico\n\n### 2. Prenatal Prontuário\n- **Health Check**\n- **Criar prontuário** - Primeira consulta (obrigatório antes de agendar)\n- Demais operações\n\n### 3. Prenatal Agenda\n- **Health Check**\n- **Criar Agenda do Médico** - Cadastrar agenda do médico (obrigatório antes de agendar)\n- **Consultar Horários Disponíveis** - Verificar horários livres\n- **Agendar Consulta** - Agendar nova consulta\n- Demais operações\n\n### 4. Prenatal Documento\n- **Health Check**\n- **Upload Document** - Upload de exames\n- **Registrar Vacina** - Registro de vacinas\n- Demais operações\n\n## Portas dos Serviços\n- Auth: 8079 | Agenda: 8080 | Documento: 8081 | Prontuário: 8082",
                 "name":  "Prenatal Digital SUS - API Unificada",
                 "schema":  "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
                 "_postman_id":  "prenatal-digital-sus-unified"
             }
}
